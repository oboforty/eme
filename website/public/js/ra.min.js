// Rajs.min.js, a small library for everything. check out https://github.com/oboforty/Rajs 

var Color=function(rgba){this.add=function(col){var col0=new Color(true);col0[0]=clamp(this[0]+col[0]);col0[1]=clamp(this[1]+col[1]);col0[2]=clamp(this[2]+col[2]);col0[3]=clamp((this[3]||1)+(col[3]||1));};this.sub=function(col){var col0=new Color(true);col0[0]=clamp(this[0]-col[0]);col0[1]=clamp(this[1]-col[1]);col0[2]=clamp(this[2]-col[2]);col0[3]=clamp((this[3]||1)-(col[3]||1));};this.blend=function(col,algorithm){var col0=new Color();var al=ColorUtil.blendmodes[algorithm];col0[0]=clamp(Math.round(al(this[0],col[0])));col0[1]=clamp(Math.round(al(this[1],col[1])));col0[2]=clamp(Math.round(al(this[2],col[2])));return col0;};this.cmp=function(col){var r=255-Math.abs(this[0]-col[0]);var g=255-Math.abs(this[1]-col[1]);var b=255-Math.abs(this[2]-col[2]);r/=255;g/=255;b/=255;return(r+g+b)/3;};this.shade=function(lum){var hex=String(this.hex()).replace(/[^0-9a-f]/gi,'');if(hex.length<6){hex=hex[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2];} lum=lum||0;var newHex="#",c,i;for(i=0;i<3;i++){c=parseInt(hex.substr(i*2,2),16);c=Math.round(Math.min(Math.max(0,c+(c*lum)),255)).toString(16);newHex+=("00"+c).substr(c.length);} return new Color(newHex);};this.contrast=function(){return(this.yiq()>=128)?'black':'white';};this.a=function(transparency){var c=this.clone();c[3]=transparency;return c;};this.yiq=function(){return((this[0]*299)+(this[1]*587)+(this[2]*114))/1000;};this.rgba=function(){if(typeof this[3]!=='undefined') return'rgba('+this[0]+','+this[1]+','+this[2]+','+this[3]+')';else return'rgb('+this[0]+','+this[1]+','+this[2]+')';};this.rgb=function(){return'rgb('+this[0]+','+this[1]+','+this[2]+')';};this.yuv=function(){var y=[0,0,0];if(this[3]) y.push(this[3]);};this.hex=function(){var r=this[0].toString(16);var g=this[1].toString(16);var b=this[2].toString(16);return"#"+(r.length==1?"0"+r:r)+(g.length==1?"0"+g:g)+(b.length==1?"0"+b:b);};this.clone=function(){var cc=new Color(Boolean(this[3]));cc[0]=this[0];cc[1]=this[1];cc[2]=this[2];cc[3]=this[3];return cc;};(function(rgba){this.push(0);this.push(0);this.push(0);if(typeof rgba==='undefined') return;if(typeof rgba=='string'){if(ColorUtil.colors[rgba.toLowerCase()]) rgba=ColorUtil.colors[rgba.toLowerCase()];if(rgba.substr(0,3)=='rgb'){var parse=rgba.substr(3);if(parse[0]=='a') rgba=rgba.substr(2,rgba.length-1).split(',');else rgba=rgba.substr(1,rgba.length-1).split(',');}else if(rgba.substr(1)=='#'){var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);if(result){this[0]=parseInt(result[1],16);this[1]=parseInt(result[2],16);this[2]=parseInt(result[3],16);}}else{}} if(rgba.constructor.name=='Color'||Array.isArray(rgba)){this[0]=rgba[0];this[1]=rgba[1];this[2]=rgba[2];}else if(typeof rgba==='boolean'){if(rgba===true) this.push(0);}else if(typeof rgba==='number'){var num=rgba*2654435761%Math.pow(2,32);num>>>=0;if(!this[3])this.push(0);this[2]=num&0xFF;this[1]=(num&0xFF00)>>>8;this[0]=(num&0xFF0000)>>>16;this[3]=((num&0xFF000000)>>>24)/255;}else if(typeof rgba==='object'){if(rgba.r)this[0]=rgba.r;if(rgba.g)this[1]=rgba.g;if(rgba.b)this[2]=rgba.b;if(rgba.a)this.push(rgba.a);}}).bind(this)(arguments.length>1?list(arguments):rgba);};Color.prototype=Array.prototype;function clamp(n){if(n<0){return(0);} if(n>255){return(255);} return n;} function yuv(y){var col=new Color([0,0,0]);if(y[3]) col[3]=y[3];col[0]=clamp(Math.floor(y[0]+1.4075*y[2]));col[1]=clamp(Math.floor(y[0]-0.3455*y[1]-(0.7169*y[2])));col[2]=clamp(Math.floor(y[0]+1.7790*y[1]));return col;} var ColorUtil={colors:{"badass":"#bada55","aliceblue":"#f0f8ff","antiquewhite":"#faebd7","aqua":"#00ffff","aquamarine":"#7fffd4","azure":"#f0ffff","beige":"#f5f5dc","bisque":"#ffe4c4","black":"#000000","blanchedalmond":"#ffebcd","blue":"#0000ff","blueviolet":"#8a2be2","brown":"#a52a2a","burlywood":"#deb887","cadetblue":"#5f9ea0","chartreuse":"#7fff00","chocolate":"#d2691e","coral":"#ff7f50","cornflowerblue":"#6495ed","cornsilk":"#fff8dc","crimson":"#dc143c","cyan":"#00ffff","darkblue":"#00008b","darkcyan":"#008b8b","darkgoldenrod":"#b8860b","darkgray":"#a9a9a9","darkgreen":"#006400","darkkhaki":"#bdb76b","darkmagenta":"#8b008b","darkolivegreen":"#556b2f","darkorange":"#ff8c00","darkorchid":"#9932cc","darkred":"#8b0000","darksalmon":"#e9967a","darkseagreen":"#8fbc8f","darkslateblue":"#483d8b","darkslategray":"#2f4f4f","darkturquoise":"#00ced1","darkviolet":"#9400d3","deeppink":"#ff1493","deepskyblue":"#00bfff","dimgray":"#696969","dodgerblue":"#1e90ff","firebrick":"#b22222","floralwhite":"#fffaf0","forestgreen":"#228b22","fuchsia":"#ff00ff","gainsboro":"#dcdcdc","ghostwhite":"#f8f8ff","gold":"#ffd700","goldenrod":"#daa520","gray":"#808080","green":"#008000","greenyellow":"#adff2f","honeydew":"#f0fff0","hotpink":"#ff69b4","indianred ":"#cd5c5c","indigo":"#4b0082","ivory":"#fffff0","khaki":"#f0e68c","lavender":"#e6e6fa","lavenderblush":"#fff0f5","lawngreen":"#7cfc00","lemonchiffon":"#fffacd","lightblue":"#add8e6","lightcoral":"#f08080","lightcyan":"#e0ffff","lightgoldenrodyellow":"#fafad2","lightgrey":"#d3d3d3","lightgreen":"#90ee90","lightpink":"#ffb6c1","lightsalmon":"#ffa07a","lightseagreen":"#20b2aa","lightskyblue":"#87cefa","lightslategray":"#778899","lightsteelblue":"#b0c4de","lightyellow":"#ffffe0","lime":"#00ff00","limegreen":"#32cd32","linen":"#faf0e6","magenta":"#ff00ff","maroon":"#800000","mediumaquamarine":"#66cdaa","mediumblue":"#0000cd","mediumorchid":"#ba55d3","mediumpurple":"#9370d8","mediumseagreen":"#3cb371","mediumslateblue":"#7b68ee","mediumspringgreen":"#00fa9a","mediumturquoise":"#48d1cc","mediumvioletred":"#c71585","midnightblue":"#191970","mintcream":"#f5fffa","mistyrose":"#ffe4e1","moccasin":"#ffe4b5","navajowhite":"#ffdead","navy":"#000080","oldlace":"#fdf5e6","olive":"#808000","olivedrab":"#6b8e23","orange":"#ffa500","orangered":"#ff4500","orchid":"#da70d6","palegoldenrod":"#eee8aa","palegreen":"#98fb98","paleturquoise":"#afeeee","palevioletred":"#d87093","papayawhip":"#ffefd5","peachpuff":"#ffdab9","peru":"#cd853f","pink":"#ffc0cb","plum":"#dda0dd","powderblue":"#b0e0e6","purple":"#800080","rebeccapurple":"#663399","red":"#ff0000","rosybrown":"#bc8f8f","royalblue":"#4169e1","saddlebrown":"#8b4513","salmon":"#fa8072","sandybrown":"#f4a460","seagreen":"#2e8b57","seashell":"#fff5ee","sienna":"#a0522d","silver":"#c0c0c0","skyblue":"#87ceeb","slateblue":"#6a5acd","slategray":"#708090","snow":"#fffafa","springgreen":"#00ff7f","steelblue":"#4682b4","tan":"#d2b48c","teal":"#008080","thistle":"#d8bfd8","tomato":"#ff6347","turquoise":"#40e0d0","violet":"#ee82ee","wheat":"#f5deb3","white":"#ffffff","whitesmoke":"#f5f5f5","yellow":"#ffff00","yellowgreen":"#9acd32"},blendmodes:{none:function(base,adj){return base;},normal:function(base,adj){return adj;},darken:function(base,adj){return Math.min(base,adj);},multiply:function(base,adj){return((base*adj)/255);},colorburn:function(base,adj){return adj<=0?0:Math.max(255-((255-base)*255/adj),0);},linearburn:function(base,adj){return Math.max(0,(base+adj-255));},lighten:function(base,adj){return Math.max(base,adj);},screen:function(base,adj){return(255-(((255-base)*(255-adj))/255));},colordodge:function(base,adj){return adj>=255?255:Math.min(base*255/(255-adj),255);},lineardodge:function(base,adj){return Math.min((base+adj),255);},overlay:function(base,adj){return(base<128)?((2*base*adj)/255):(255-(2*(255-base)*(255-adj)/255));},softlight:function(base,adj){return(base<128)?(((adj>>1)+64)*base*(2/255)):(255-(191-(adj>>1))*(255-base)*(2/255));},hardlight:function(base,adj){return adj<128?(2*base*adj)/255:255-((2*(255-base)*(255-adj))/255);},difference:function(base,adj){return Math.abs(base-adj);},exclusion:function(base,adj){return 255-(((255-base)*(255-adj)/255)+(base*adj/255));},subtract:function(base,adj){return Math.max((base-adj),0);}}};var Cookie=new(function(){this.get=function(name,def){var value="; "+document.cookie;var parts=value.split("; "+name+"=");if(parts.length==2){return parts.pop().split(";").shift();}else{return def;}};this.set=function(name,value,days){var expires="";if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));expires="; expires="+date.toUTCString();} document.cookie=name+"="+value+expires+"; path=/";};this.delete=function(name){this.set(name,"",-1);};})();var Events={events:{},callbacks:{},on:function(eventName,callback){if(!this.events[eventName]) this.events[eventName]=[];this.events[eventName].push(callback);},once:function(eventName,callback){if(!this.callbacks[eventName]) this.callbacks[eventName]=[];this.callbacks[eventName].push(callback);},off:function(eventName){if(this.events[eventName]) this.events[eventName]=[];if(this.callbacks[eventName]) this.callbacks[eventName]=[];},fire:function(eventName,args,context){if(!this.events[eventName]) this.events[eventName]=[];for(var event of this.events[eventName]) event.apply(context,args);if(!this.callbacks[eventName]) this.callbacks[eventName]=[];for(var event of this.callbacks[eventName]) event.apply(context,args);this.callbacks[eventName]=[];}};Number.prototype.estimation=function(){if(this>999999999) return(this/1000000000).toFixed(1)+'B';else if(this>999999) return(this/1000000).toFixed(1)+'M';else if(this>999) return(this/1000).toFixed(1)+'k';return String(this);};Number.prototype.roman=function(){var decimalValue=[1000,900,500,400,100,90,50,40,10,9,5,4,1];var romanNumeral=['M','CM','D','CD','C','XC','L','XL','X','IX','V','IV','I'];var x=this;var romanized='';for(var index=0;index<decimalValue.length;index++){while(decimalValue[index]<=x){romanized+=romanNumeral[index];x-=decimalValue[index];}} return romanized;};Number.prototype.ordinal=function(){var j=this%10,k=this%100;if(j==1&&k!=11)return this+"st";else if(j==2&&k!=12)return this+"nd";else if(j==3&&k!=13)return this+"rd";return this+"th";};var Hotkeys=new(function(){this.events={};this.on=function(evt,callback){var evts=evt.split('+');evts.sort();var evtId=evts.join(',');this.events[evtId]=callback;};document.onkeydown=function(e){var evts=[];switch(e.which){case 9:evts.push('tab');break;case 13:evts.push('enter');break;case 27:evts.push('esc');break;case 32:evts.push('space');break;case 127:evts.push('delete');break;case 37:evts.push('left');break;case 38:evts.push('up');break;case 39:evts.push('right');break;case 40:evts.push('down');break;default:if(32<e.which&&e.which<127){evts.push(String.fromCharCode(e.which));} break;} if(e.altKey)evts.push('alt');if(e.shiftKey)evts.push('shift');if(e.ctrlKey)evts.push('ctrl');evts.sort();var evtId=evts.join(',');if(Hotkeys.events[evtId]){Hotkeys.events[evtId](e);return false;} return true;}})();function $(sel0){var c=sel0[0];var sel=sel0.substr(1);if(c=='#'){return document.getElementById(sel);} else if(c=='.'){return document.getElementsByClassName(sel);} else{return document.getElementsByTagName(sel0);}} Math.rad2deg=180/Math.PI;Math.deg2rad=Math.PI/180;Math.TAU=2*Math.PI;Math.log=(function(){var log=Math.log;return function(n,base){return log(n)/(base?log(base):1);};})();var Params=new(function(){this.params={},this.inited=false,this.init=function(){var prmstr=window.location.search.substr(1);if(prmstr!=null){var prmarr=prmstr.split("&");for(var i=0;i<prmarr.length;i++){var tmparr=prmarr[i].split("=");this.params[tmparr[0]]=tmparr[1];}}};this.get=function(name,def){if(!this.inited){this.init();this.inited=true;} if(this.params[name]){return this.params[name];}else{return def;}};this.set=function(key,value){key=encodeURI(key);value=encodeURI(value);var kvp=document.location.search.substr(1).split('&');var i=kvp.length;var x;while(i--) {x=kvp[i].split('=');if(x[0]==key) {x[1]=value;kvp[i]=x.join('=');break;}} if(i<0){kvp[kvp.length]=[key,value].join('=');} document.location.search=kvp.join('&');};this.init();})();function time(){return Math.floor((new Date()).getTime()/1000);} function*range(min,max,step){if(!max){var max=min;var min=0;} if(!step){var step=1;} if(step>0) for(var i=min;i<max;i+=step) yield i;else if(step<0) for(var i=max;i<min;i+=step) yield i;} function len(obj){if(obj.length) return obj.length;else if(obj.size) if(typeof obj.size==='function') return obj.size();else return obj.size;else if(typeof obj==='object') return Object.keys(obj).length;else throw"Type "+typeof(obj)+" has no 'len' property.";} function any(iterable){for(var index=0;index<iterable.length;++index){if(iterable[index])return true;} return false;} function all(iterable){for(var index=0;index<iterable.length;++index){if(!iterable[index])return false;} return true;} function round(n,digits){if(!digits) return Math.round(n);else return parseFloat(n.toFixed(digits));} String.prototype.title=function(){return this.charAt(0).toUpperCase()+this.slice(1).toLowerCase();};String.prototype.lower=function(){return this.toLowerCase();};String.prototype.upper=function(){return this.toUpperCase();};Set.prototype.update=function(arr){for(var item of arr){this.add(item);}};function str(val){if(typeof val==='undefined') return'';if(typeof val==='string') return val;return val.toString();} function float(val){if(typeof val==='undefined') return 0.0;if(typeof val==='string') return parseFloat(val);if(typeof val==='number') return val;} function int(val){if(typeof val==='undefined') return 0;if(typeof val==='string') return parseInt(val);if(typeof val==='number') return val;} function bool(val){if(typeof val==='undefined') return false;return Boolean(val);} function dict(val){if(typeof val==='undefined') return{};var v={};for(var key in val){var e=val[key];v[e[0]]=e[1];} return v;} function list(val){if(typeof val==='undefined') return[];var l=[];for(var elem of val){l.push(elem);} return l;} function defaultdict(deftype,isFunc){return new Proxy({},{get:function(target,name){if(typeof target[name]!=='undefined') return target[name];else if(typeof deftype==='function'){if(isFunc) var v=deftype();else var v=new deftype();target[name]=v;return v}}});} function choice(arr){return arr[Math.floor(Math.random()*arr.length)];}